<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">  
	<meta name="mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-title" content="LTX-A" /> 
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-status-bar-style" content="black">

	<link rel="manifest" href="manifest.json">

	<link rel="stylesheet" href="../assets/lib/onsenui-2.5.2/css/onsenui.css">
	<link rel="stylesheet" href="../assets/lib/onsenui-2.5.2/css/onsen-css-components.css">
	<style>
	.time {
		box-sizing: border-box;
		height: 30px;
		color: #169;
		font-size: 8px;
		text-align: right;
		padding: 2px 8px;
		border-right: solid 1px #ccf;
	}
	.act {
		margin-left: 48px;
		box-sizing: border-box;
		position: absolute;
		border-radius: 2px;
		padding: 6px;
		font-size: 11px;
		width: calc(100% - 52px);
		color: #333;
	}
	.time:nth-child(even) {
		border-bottom: dotted 1px #ccc;
	}
	.color-circle {
		width: 16px; height: 16px;
		border-radius: 8px;
	}
	.color-circle-in-dlg {
		width: 28px; height: 28px;
		border-radius: 14px;
		float: left;
		margin: 8px;
	}
	</style>

	<script src="../assets/lib/onsenui-2.5.2//js/onsenui.min.js"></script>

	<title>My Timeline</title>
</head>
<body>

<ons-navigator id="myNavigator" page="home.html"></ons-navigator>


<ons-template id="stats.html">
  <ons-page id="stats">
    <ons-toolbar>
      <div class="left"><ons-back-button>Back</ons-back-button></div>
      <div class="center">Stats</div>
      <div class="right">
        <ons-toolbar-button onclick="app.goToPage('setting');">
        	<ons-icon icon="cog"></ons-icon>
        </ons-toolbar-button>
      </div>
    </ons-toolbar>

  </ons-page>
</ons-template>


<ons-template id="home.html">
  <ons-page id="home">
    <ons-toolbar>
      <div class="left">
        <ons-toolbar-button onclick="app.fromTemplate();">
        	<ons-icon icon="navicon"></ons-icon>
        </ons-toolbar-button>
      </div>
      <div class="center" onclick="app.showCalendar()">Aug 12, 2017</div>
      <div class="right">
        <ons-toolbar-button onclick="app.goToPage('edit');">
        	<ons-icon icon="pencil"></ons-icon> Edit
        </ons-toolbar-button>
      </div>
    </ons-toolbar>


<ons-gesture-detector>
  <div id="detect-area">
	<div style="height: 64px; border: solid 0px #f00;">
		Aug 12, 2017
		<input type="date" id="inp-cal" value="" style="display: block; width: 1px;">
	</div>
	<div id="line" style="border: solid 0px #ccc; border-top: double 3px #ccc; border-bottom: double 1px #ccc;">
		<div style="border: solid 0px #0f0; width: 44px;" id="day-line">
			<div class="time">0:00</div><div class="time">0:30</div>
			<div class="time">1:00</div><div class="time">1:30</div>
			<div class="time">2:00</div><div class="time">2:30</div>
			<div class="time">3:00</div><div class="time">3:30</div>
			<div class="time">4:00</div><div class="time">4:30</div>
			<div class="time">5:00</div><div class="time">5:30</div>
			<div class="time">6:00</div><div class="time">6:30</div>
			<div class="time">7:00</div><div class="time">7:30</div>
			<div class="time">8:00</div><div class="time">8:30</div>
			<div class="time">9:00</div><div class="time">9:30</div>
			<div class="time">10:00</div><div class="time">10:30</div>
			<div class="time">11:00</div><div class="time">11:30</div>
			<div class="time">12:00</div><div class="time">12:30</div>
			<div class="time">13:00</div><div class="time">13:30</div>
			<div class="time">14:00</div><div class="time">14:30</div>
			<div class="time">15:00</div><div class="time">15:30</div>
			<div class="time">16:00</div><div class="time">16:30</div>
			<div class="time">17:00</div><div class="time">17:30</div>
			<div class="time">18:00</div><div class="time">18:30</div>
			<div class="time">19:00</div><div class="time">19:30</div>
			<div class="time">20:00</div><div class="time">20:30</div>
			<div class="time">21:00</div><div class="time">21:30</div>
			<div class="time">22:00</div><div class="time">22:30</div>
			<div class="time">23:00</div><div class="time">23:30</div>
		</div>
	</div>
	<div style="height: 256px;"></div>
  </div>
</ons-gesture-detector>

  </ons-page>
</ons-template>


<ons-template id="edit.html">
  <ons-page id="edit">
    <ons-toolbar>
      <div class="left"><ons-back-button>Back</ons-back-button></div>
      <div class="center">Aug 31, 2017</div>
      <div class="right">
        <ons-toolbar-button onclick="nav.popPage();">
        	<ons-icon icon="save"></ons-icon> Save
        </ons-toolbar-button>
      </div>
    </ons-toolbar>

	<div class="list-title">Time</div>
	<ul class="list">
	  <li class="list-item">
	    <div class="list-item__center">Start</div>
	    <div class="list-item__right">
	    	<input type="time" value="12:00">
	    </div>
	  </li>
	  <li class="list-item">
	    <div class="list-item__center">End</div>
	    <div class="list-item__right">
	    	<input type="time" value="12:00">
	    </div>
	  </li>
	</ul>
	<div class="list-title">Activity</div>
	<ul class="list">
	  <li class="list-item list-item--tappable">
	    <div class="list-item__left">
	      <div class="color-circle" style="background-color: #f00;"></div>
	    </div>
	    <div class="list-item__center">
		  <label class="radio-button" for="r0" style="width: 100%;">Label 0</label>
	    </div>
	    <div class="list-item__right">
		  <input type="radio" class="radio-button__input" name="r" id="r0">
		  <div class="radio-button__checkmark"></div>
	    </div>
	  </li>
	  <li class="list-item list-item--tappable">
	    <div class="list-item__left">
	      <div class="color-circle" style="background-color: #0f0;"></div>
	    </div>
	    <div class="list-item__center">
		  <label class="radio-button" for="r1" style="width: 100%;">Label 1</label>
	    </div>
	    <div class="list-item__right">
		  <input type="radio" class="radio-button__input" name="r" id="r1">
		  <div class="radio-button__checkmark"></div>
	    </div>
	  </li>
	  <li class="list-item list-item--tappable">
	    <div class="list-item__left">
	      <div class="color-circle" style="background-color: #00f;"></div>
	    </div>
	    <div class="list-item__center">
		  <label class="radio-button" for="r2" style="width: 100%;">Label 2</label>
	    </div>
	    <div class="list-item__right">
		  <input type="radio" class="radio-button__input" name="r" id="r2">
		  <div class="radio-button__checkmark"></div>
	    </div>
	  </li>
	  <li class="list-item list-item--tappable">
	    <div class="list-item__left">
	      <div class="color-circle" style="background-color: #ff0;"></div>
	    </div>
	    <div class="list-item__center">
		  <label class="radio-button" for="r3" style="width: 100%;">Label 3</label>
	    </div>
	    <div class="list-item__right">
		  <input type="radio" class="radio-button__input" name="r" id="r3">
		  <div class="radio-button__checkmark"></div>
	    </div>
	  </li>
	  <li class="list-item">
	    <div class="list-item__center">
	      <button class="toolbar-button" style="width: 95%;" onclick="app.goToPage('setting')">
	      	<ons-icon icon="pencil"></ons-icon> 
	      	Edit Activity List
	      </button>
	    </div>
	  </li>
	</ul>
	<div class="list-title">Memo</div>
	<ul class="list">
	  <li class="list-item">
	    <div class="list-item__center">
	      <textarea name="" id="" rows="10" style="width: 100%;"></textarea>
	    </div>
	  </li>
	</ul>
  </ons-page>
</ons-template>


<ons-template id="setting.html">
  <ons-page id="setting">
    <ons-toolbar>
      <div class="left"><ons-back-button>Back</ons-back-button></div>
      <div class="center">Setting</div>
      <div class="right">
        <ons-toolbar-button onclick="app.showDialog('dialog');">
        	<ons-icon icon="plus"></ons-icon> Add
        </ons-toolbar-button>
      </div>
    </ons-toolbar>

	<div class="list-title">Activity</div>
	<ul class="list">
	  <li class="list-item" onclick="app.showDialog('dialog')">
	    <div class="list-item__center">List 0</div>
	    <div class="list-item__left">
	      <div class="color-circle" style="background-color: #f00;"></div>
	    </div>
	  </li>
	  <li class="list-item" onclick="app.showDialog('dialog')">
	    <div class="list-item__center">List 1</div>
	    <div class="list-item__left">
	      <div class="color-circle" style="background-color: #0f0;"></div>
	    </div>
	  </li>
	  <li class="list-item" onclick="app.showDialog('dialog')">
	    <div class="list-item__center">List 2</div>
	    <div class="list-item__left">
	      <div class="color-circle" style="background-color: #00f;"></div>
	    </div>
	  </li>
	</ul>

  </ons-page>
</ons-template>


<ons-dialog id="dialog">
  <div class="alert-dialog-container">
	  <div class="alert-dialog-title">アクティビティ</div>
	  <div class="alert-dialog-content">
	  	<p>
	  		<input type="text" class="text-input" style="text-align: center; border-bottom: solid 1px #ccc;" placeholder="activity">
	  	</p>
	  	<div style="padding: 8px 0 0 0;">
	  		<div class="color-circle-in-dlg" style="background-color: #f00;"></div>
	  		<div class="color-circle-in-dlg" style="background-color: #0f0;"></div>
	  		<div class="color-circle-in-dlg" style="background-color: #00f;"></div>
	  		<div class="color-circle-in-dlg" style="background-color: #ff0;"></div>
	  		<div class="color-circle-in-dlg" style="background-color: #f0f;"></div>
	  		<div class="color-circle-in-dlg" style="background-color: #0ff;"></div>
	  		<input type="color" value="">
	  	</div>
	  </div>
	  <div class="alert-dialog-footer alert-dialog-footer--rowfooter">
	    <button class="alert-dialog-button alert-dialog-button--rowfooter" onclick="app.hideDialog('dialog')">Cancel</button>
	    <button class="alert-dialog-button alert-dialog-button--rowfooter alert-dialog-button--primal" onclick="app.hideDialog('dialog')">OK</button>
	  </div>
  </div>
</ons-dialog>

<script src="index.js"></script>
<script>
var dat = [
	{ start: '4:00', end: '4:30', text: '移動', color: '#ccf', memo: '神楽坂ー池袋' },
	{ start: '0:30', end: '0:30', text: '食事（自）', color: '#cfc', memo: '' },
	{ start: '1:00', end: '1:30', text: 'ゲーム', color: '#fcc', memo: '' },
	{ start: '2:00', end: '3:00', text: '読書', color: '#ffc', memo: '教養' },
	{ start: '6:00', end: '10:00', text: '仕事', color: '#fcf', memo: '会社' }
];

document.addEventListener('init', function(event) {
  var page = event.target;

  if (page.id === 'home') {
  	var line = document.getElementById('line');
  	dat.forEach(function(d, i) {
  		var s = d.start.split(':'),
  			e = d.end.split(':'),
  			h = parseInt(s[0]) * 2 + (s[1]=='00' ? 0 : 1),
  			a = parseInt(e[0]) * 2 + (e[1]=='00' ? 0 : 1),
  			css  = 'height: ' + ((a - h) * 30 - 3) + 'px;';
  			css += 'top: ' + (70 + h * 30) + 'px;';
  			css += 'background-color: ' + d.color + ';',
  			div = document.createElement('div');
  		div.innerHTML = d.text + ' ： ' + d.memo;
  		div.className = 'act';
  		div.style = css;
  		div.onclick = function(e) {
  			e.preventDefault();
  			console.log(d.text, 'd', d, 'i', i);
	        nav.pushPage('edit.html', dat[i]);
  		};
  		line.append(div);
  	});
  } else if(page.id === 'list') {
    page.querySelectorAll('.row').forEach(function(row) {
      row.onclick = function(evt) {
        nav.pushPage('edit.html', {data: {title: 'Page Edit'}});
      };
    });
  } else {
    // page.querySelector('ons-toolbar .center').innerHTML = page.data.title;
  }
});

document.addEventListener('swipeleft', function(event) {
	if (event.target.matches('#detect-area')) {
		console.log('Swipe left is detected.');
	}
});


var nav = document.querySelector('#myNavigator');
var app = {
  goToPage    : function(pageId) { nav.pushPage(pageId + '.html'); },
  showDialog  : function(id) { document.getElementById(id).show(); },
  hideDialog  : function(id) { document.getElementById(id).hide(); },
  fromTemplate : function() {
    var dialog = document.getElementById('dialog-3');
    if (dialog) {
      dialog.show();
    } else {
      ons.createDialog('dialog.html').then(function(dialog) {
        dialog.show();
      });
    }
  },
  showCalendar : function() {
  	var inpCal = document.getElementById('inp-cal');
  	inpCal.focus();
  	alert('calender?');
  	console.log('focus');
  }
};

</script>
</body>
</html>