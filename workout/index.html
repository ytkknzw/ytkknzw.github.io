<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">  
	<meta name="mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-title" content="LTX-A" /> 
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-status-bar-style" content="black">

	<link rel="manifest" href="manifest.json">

	<link rel="stylesheet" href="../assets/lib/onsenui-2.5.2/css/onsenui.css">
	<link rel="stylesheet" href="../assets/lib/onsenui-2.5.2/css/onsen-css-components.css">
	<style>
		#target-date {
			font-size: 20px;
			font-weight: 400;
			background-color: transparent;
			border-style: none;
			color: #fff;
		}
		#cal td {
			width: calc(100% / 7);
			height: 44px;
			text-align: center;
			border-top: solid 1px #eee;
			background-color: #f9f9f9;
		}
		.x { color: #00c; font-weight: bold; }
		.b { font-size: 18px; font-weight: bold; }
		#list td {
			text-align: right;
		}
		.event-title {
			/*height: 44px;*/
			font-size: 18px;
			padding: 16px 0 6px 0;
			font-weight: normal;
			text-align: left;
		}
		.part-button {
			float: left;
			width: 80px;
			text-align: center;
			padding: 0 8px; margin: 0;
		}
		.body {
			width: 80px;
		}
		#memo_text:empty + div {
			display: block;
		}
		#memo_text:empty, #memo_text + div {
			display: none;
		}
	</style>

	<script src="../assets/lib/onsenui-2.5.2//js/onsenui.min.js"></script>

	<title>My Workout</title>
</head>
<body>

<ons-navigator id="myNavigator" page="home.html"></ons-navigator>

<ons-template id="home.html">
  <ons-page id="home">
    <ons-toolbar>
      <div class="left">
        <ons-toolbar-button onclick="app.fromTemplate();">
        	<ons-icon icon="navicon"></ons-icon>
        </ons-toolbar-button>
      </div>
      <div class="center">Aug 12, 2017</div>
      <div class="right">
        <ons-toolbar-button onclick="app.goToPage('list');">
        	<ons-icon icon="pencil"></ons-icon> Edit
        </ons-toolbar-button>
      </div>
    </ons-toolbar>

	<table id="cal" style="width: 100%; border-collapse: collapse;">
		<thead>
			<tr style="font-size: 25px; height: 52px; background-color: #f9f9f9;">
				<th colspan="4" id="cal-lbl-ym">August 2017</th>
				<th><ons-icon icon="arrow-left" onclick="calendar.changeMonth(-1)"></ons-icon></th>
				<th><ons-icon icon="circle" onclick="calendar.changeMonth(0)"></ons-icon></th>
				<th><ons-icon icon="arrow-right" onclick="calendar.changeMonth(1)"></ons-icon></th>
			</tr>
			<tr style="height: 32px; background: #eee;">
				<th>S</th><th>M</th><th>T</th><th>W</th><th>T</th><th>F</th><th>S</th>
			</tr>
		</thead>
	</table>

	<div style="padding: 16px;">
		<div style="font-size: 18px;">Memo</div>
		<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. At perspiciatis possimus ratione fugit ipsa! Deserunt incidunt modi fugit possimus excepturi officia, impedit distinctio vitae eos, qui dicta blanditiis, nostrum cum!</p>

		<table id="list" style="width: 100%;">
			<thead>
				<tr><td>#</td><td>weight</td><td>&times;</td><td>reps</td>
					<td>=</td><td>sum</td><td>:</td><td>total</td></tr>
			</thead>
			<tbody>
				<tr><th class="event-title" colspan="6">Shoulder Press</th></tr>
				<tr><td>1</td><td class="b">45.00</td><td>&times;</td><td>12</td>
					<td>=</td><td>540</td><td>:</td><td>540</td></tr>
				<tr><td>2</td><td class="b">45.00</td><td>&times;</td><td>12</td>
					<td>=</td><td>540</td><td>:</td><td>540</td></tr>

				<tr><th class="event-title" colspan="6">Bench Press</th></tr>
				<tr><td>1</td><td class="b">20.00</td><td>&times;</td><td class="b">20</td>
					<td>=</td><td>400</td><td>:</td><td>400</td></tr>
				<tr><td>2</td><td class="b">50.00</td><td>&times;</td><td class="b">10</td>
					<td>=</td><td>500</td><td>:</td><td>900</td></tr>
				<tr><td>3</td><td class="b">50.00</td><td>&times;</td><td class="b">8</td>
					<td>=</td><td>400</td><td>:</td><td>1300</td></tr>
				<tr><td>4</td><td class="b">50.00</td><td>&times;</td><td class="b">6</td>
					<td>=</td><td>300</td><td>:</td><td>1600</td></tr>

				<tr><th class="event-title" colspan="6">Dumbbell Press</th></tr>
				<tr><td>1</td><td class="b">45.00</td><td>&times;</td><td class="b">12</td>
					<td>=</td><td>540</td><td>:</td><td>540</td></tr>
				<tr><td>2</td><td class="b">45.00</td><td>&times;</td><td class="b">12</td>
					<td>=</td><td>540</td><td>:</td><td>540</td></tr>
			</tbody>
		</table>
		<div style="height: 256px;">&nbsp;</div>
	</div>
  </ons-page>
</ons-template>


<ons-template id="list.html">
  <ons-page id="list">
    <ons-toolbar>
      <div class="left"><ons-back-button>Back</ons-back-button></div>
      <div class="center">Aug 31 Edit</div>
      <div class="right">
        <ons-toolbar-button onclick="app.showDialog('dlg-mode');">
        	<ons-icon icon="cog"></ons-icon>
        </ons-toolbar-button>
        <ons-toolbar-button onclick="app.goToPage('events');">
        	<ons-icon icon="plus"></ons-icon>
        </ons-toolbar-button>
      </div>
    </ons-toolbar>

	<div style="padding: 0 16px;">

        <!-- <ons-button onclick="app.goToPage('memo');">Edit Memo</ons-button> -->
        <!-- <ons-button onclick="app.goToPage('events');">Add Event</ons-button> -->
		
		<!-- <div class="event-title">Memo</div> -->
		<!-- <p style="background-color: #ccc; min-height: 32px;"></p> -->
		<div style="margin: 16px 0; padding: 8px; border: dashed 1px #ccc;" onclick="alert(this.innerText)">
			<div id="memo_text"></div>
			<div style="color: #999; outline-style: none;" contenteditable="true">Tap to Edit Memo</div>
		</div>

		<div id="mode_segment" class="segment" style="box-sizing: border-box; width: 100%; margin: 0 auto;">
		  <div class="segment__item">
		    <input type="radio" class="segment__input" name="segment-a" checked>
		    <button class="segment__button">Add</button>
		  </div>
		  <div class="segment__item">
		    <input type="radio" class="segment__input" name="segment-a">
		    <button class="segment__button">Edit</button>
		  </div>
		  <div class="segment__item">
		    <input type="radio" class="segment__input" name="segment-a">
		    <button class="segment__button">Remove</button>
		  </div>
		</div>
		<div>&nbsp;</div>
		<table id="list" style="width: 100%;">
			<thead>
				<tr><td>#</td><td>weight</td><td>&times;</td><td>reps</td>
					<td>=</td><td>sum</td><td>:</td><td>total</td></tr>
			</thead>
			<tbody>
				<tr><th class="event-title" colspan="8">Shoulder Press</th>
					<td><ons-icon class="btn" icon="plus" onclick="app.showDialog('dialog');"></ons-icon></td></tr>
				<tr style="border-bottom: solid 1px #ccc; height: 32px;"><td>1</td>
					<td><big><b>45.00</b></big></td><td>&times;</td><td><big><b>12</b></big></td>
					<td>=</td><td>540</td><td>:</td><td>540</td>
					<td><ons-icon class="btn-edit" icon="pencil" onclick="app.showDialog('dialog');"></ons-icon>
						<ons-icon class="btn-del" icon="minus" onclick="alert('del');"></ons-icon></td></tr>
				<tr style="border-bottom: solid 1px #ccc; height: 32px;"><td>2</td>
					<td><big><b>45.25</b></big></td><td>&times;</td><td><big><b>12</b></big></td>
					<td>=</td><td>543</td><td>:</td><td>1083</td>
					<td><ons-icon class="btn-edit" icon="pencil" onclick="app.showDialog('dialog');"></ons-icon>
						<ons-icon class="btn-del" icon="minus" onclick="alert('del');"></ons-icon></td></tr>
				<tr><td>&nbsp;</td></tr>

				<tr><th class="event-title" colspan="7">Bench Press</th>
					<td colspan="2"><i class="material-icons">add</i></td></tr>
				<tr style="border-bottom: solid 1px #ccc; height: 32px;"><td>1</td>
					<td><big><b>45.00</b></big></td><td>&times;</td><td><big><b>12</b></big></td>
					<td>=</td><td>540</td><td>:</td><td>540</td>
					<td><ons-icon icon="edit" onclick="app.showDialog('dialog');"></ons-icon></td></tr>
				<tr style="border-bottom: solid 1px #ccc; height: 32px;"><td>2</td>
					<td><big><b>45.25</b></big></td><td>&times;</td><td><big><b>12</b></big></td>
					<td>=</td><td>543</td><td>:</td><td>1083</td>
					<td><ons-icon icon="pencil" onclick="app.showDialog('dialog');"></ons-icon></td></tr>
				<tr><td>&nbsp;</td></tr>

				<tr><th class="event-title" colspan="7">Dumbbell Press</th>
					<td colspan="2"><i class="material-icons">add</i></td></tr>
				<tr style="border-bottom: solid 1px #ccc; height: 32px;"><td>1</td>
					<td><big><b>45.00</b></big></td><td>&times;</td><td><big><b>12</b></big></td>
					<td>=</td><td>540</td><td>:</td><td>540</td>
					<td><ons-icon icon="edit" onclick="app.showDialog('dialog');"></ons-icon></td></tr>
				<tr style="border-bottom: solid 1px #ccc; height: 32px;"><td>2</td>
					<td><big><b>45.25</b></big></td><td>&times;</td><td><big><b>12</b></big></td>
					<td>=</td><td>543</td><td>:</td><td>1083</td>
					<td><ons-icon icon="pencil" onclick="app.showDialog('dialog');"></ons-icon></td></tr>
				<tr><td>&nbsp;</td></tr>
			</tbody>
		</table>

		<div style="height: 256px;">&nbsp;</div>
	</div>

  </ons-page>
</ons-template>




<ons-template id="events.html">
  <ons-page id="events">
    <ons-toolbar>
      <div class="left"><ons-back-button>Back</ons-back-button></div>
      <div class="center">Add Event</div>
    </ons-toolbar>

	<div style="width: 100%; height: 128px; overflow-x: scroll;">
		<div style="padding: 16px; width: 960px;" id="part-buttons">
		</div>
	</div>

	<div style="clear: both;"></div>

	<ul class="list" id="event-list">
	</ul>

	<ul class="list">
		<li class="list-item list-item--tappable">
			<label for="s1" class="list-item__center">
			  Checkbox
			</label>
			<div class="list-item__left">
				<i class="material-icons">checkbox-blank</i>
			</div>
		</li>
  	</ul>

  </ons-page>
</ons-template>



<ons-dialog id="dialog">
  <div class="alert-dialog-container">
	  <div class="alert-dialog-title">ベンチプレス</div>
	  <div class="alert-dialog-content" style="padding: 16px;">
		<input type="number" style="width: 64px; font-size: 18px; text-align: right;" value="45">kg &nbsp;x
		<input type="number" style="width: 32px; font-size: 18px; text-align: right;" value="12" min="1" max="99">reps
	  </div>
	  <div class="alert-dialog-footer alert-dialog-footer--rowfooter">
	    <button class="alert-dialog-button alert-dialog-button--rowfooter" onclick="app.hideDialog('dialog')">Cancel</button>
	    <button class="alert-dialog-button alert-dialog-button--rowfooter alert-dialog-button--primal" onclick="app.hideDialog('dialog')">OK</button>
	  </div>
  </div>
</ons-dialog>


<div style="display: none;" class="mdl-layout mdl-js-layout mdl-layout--fixed-header mdl-layout--fixed-tabs">
    <main class="mdl-layout__content">
			<ul>
				<li><a href="#">胸</a></li>
				<ul>
					<li class="wo-cat">バーベル</li>
					<ul>
						<li><a class="wo-list" href="#bench-press">ベンチプレス</a></li>
						<li><a class="wo-list" href="#incline-bench-press">インクラインベンチプレス</a></li>
						<li><a class="wo-list" href="#decline-bench-press">デクラインベンチプレス</a></li>
						<li><a class="wo-list" href="#bent-arm-pull-over">ベントアームプルオーバー</a></li>
					</ul>
					<li class="wo-cat">ダンベル</li>
					<ul>
						<li><a class="wo-list" href="#">ダンベルフライ</a></li>
						<li><a class="wo-list" href="#">インクラインダンベルフライ</a></li>
						<li><a class="wo-list" href="#">ダンベルベンチプレス</a></li>
						<li><a class="wo-list" href="#">インクラインダンベルベンチプレス</a></li>
						<li><a class="wo-list" href="#">ダンベルプルオーバー</a></li>
					</ul>
					<li class="wo-cat">マシン</li>
					<ul>
						<li><a class="wo-list" href="#">バタフライマシン</a></li>
						<li><a class="wo-list" href="#">ケーブルクロスオーバー</a></li>
					</ul>
					<li class="wo-cat">自重(器具なし)</li>
					<ul>
						<li><a class="wo-list" href="#">ディップス</a></li>
						<li><a class="wo-list" href="#">プッシュアップ</a></li>
					</ul>
				</ul>
				<li><a href="#">背中</a></li>
				<ul>
					<li class="wo-cat">バーベル</li>
					<ul>
						<li><a class="wo-list" href="#">ベントオーバーローイング</a></li>
						<li><a class="wo-list" href="#">デッドリフト</a></li>
						<li><a class="wo-list" href="#">バックエクステンション</a></li>
						<li><a class="wo-list" href="#">ベンドオーバー</a></li>
						<li><a class="wo-list" href="#">ベントアームプルオーバー</a></li>
					</ul>
					<li class="wo-cat">ダンベル</li>
					<ul>
						<li><a class="wo-list" href="#">ダンベルプルオーバー</a></li>
						<li><a class="wo-list" href="#">ワンハンドローイング</a></li>
					</ul>
					<li class="wo-cat">マシン</li>
					<ul>
						<li><a class="wo-list" href="#">ラットプルダウン</a></li>
						<li><a class="wo-list" href="#">シーテッドプーリーロー</a></li>
					</ul>
					<li class="wo-cat">自重(器具なし)</li>
					<ul>
						<li><a class="wo-list" href="#">チンニング</a></li>
					</ul>
				</ul>
				<li><a href="#">肩</a></li>
				<ul>
					<li class="wo-cat">バーベル</li>
					<ul>
						<li><a class="wo-list" href="#">スタンディングロー</a></li>
						<li><a class="wo-list" href="#">バックプレス</a></li>
						<li><a class="wo-list" href="#">フロントプレス</a></li>
						<li><a class="wo-list" href="#">バーベルシュラッグ</a></li>
						<li><a class="wo-list" href="#">ベントオーバーフロントプルアップ</a></li>
						<li><a class="wo-list" href="#">プルアップトゥチェスト</a></li>
					</ul>
					<li class="wo-cat">ダンベル</li>
					<ul>
						<li><a class="wo-list" href="#">サイドレイズ</a></li>
						<li><a class="wo-list" href="#">ダンベルプレス</a></li>
						<li><a class="wo-list" href="#">ベントオーバーラテラル</a></li>
						<li><a class="wo-list" href="#">フロントレイズ</a></li>
						<li><a class="wo-list" href="#">ダンベルシュラッグ</a></li>
						<li><a class="wo-list" href="#">ワンハンドラテラル</a></li>
					</ul>
					<li class="wo-cat">マシン</li>
					<ul>
						<li><a class="wo-list" href="#">ケーブルサイドレイズ</a></li>
						<li><a class="wo-list" href="#">ケーブルフロントレイズ</a></li>
					</ul>
					<li class="wo-cat">自重(器具なし)</li>
					<ul>
						<li><a class="wo-list" href="#">ハンドスタンドプッシュアップ</a></li>
					</ul>
				</ul>
				<li><a href="#">上腕三頭筋</a></li>
				<ul>
					<li class="wo-cat">バーベル</li>
					<ul>
						<li><a class="wo-list" href="#">フレンチプレス</a></li>
						<li><a class="wo-list" href="#">トライセプスエクステンション</a></li>
						<li><a class="wo-list" href="#">ナローグリップベンチプレス</a></li>
					</ul>
					<li class="wo-cat">ダンベル</li>
					<ul>
						<li><a class="wo-list" href="#">ワンハンドトライセプスエクステンションスタンディング</a></li>
						<li><a class="wo-list" href="#">ワンハンドトライセプスエクステンションライイング</a></li>
						<li><a class="wo-list" href="#">トライセプスキックバック</a></li>
					</ul>
					<li class="wo-cat">マシン</li>
					<ul>
						<li><a class="wo-list" href="#">ケーブルトライセプスエクステンション</a></li>
						<li><a class="wo-list" href="#">プレスダウン</a></li>
					</ul>
					<li class="wo-cat">自重(器具なし)</li>
					<ul>
						<li><a class="wo-list" href="#">ナロープッシュアップ</a></li>
						<li><a class="wo-list" href="#">リバースプッシュアップ</a></li>
					</ul>
				</ul>
				<li><a href="#">上腕二頭筋</a></li>
				<ul>
					<li class="wo-cat">バーベル</li>
					<ul>
						<li><a class="wo-list" href="#">バーベルカール</a></li>
						<li><a class="wo-list" href="#">プリーチャーズベンチカール</a></li>
					</ul>
					<li class="wo-cat">ダンベル</li>
					<ul>
						<li><a class="wo-list" href="#">ダンベルカール</a></li>
						<li><a class="wo-list" href="#">コンセントレーションカール</a></li>
						<li><a class="wo-list" href="#">インクラインカール</a></li>
						<li><a class="wo-list" href="#">ハンマーカール</a></li>
						<li><a class="wo-list" href="#">ライイングダウンカール</a></li>
					</ul>
					<li class="wo-cat">マシン</li>
					<ul>
						<li><a class="wo-list" href="#">ケーブルカール</a></li>
					</ul>
				</ul>
				<li><a href="#">腹筋</a></li>
				<ul>
					<li class="wo-cat">バーベル</li>
					<ul>
						<li><a class="wo-list" href="#">プローンローリング</a></li>
					</ul>
					<li class="wo-cat">ダンベル</li>
					<ul>
						<li><a class="wo-list" href="#">サイドベンド</a></li>
					</ul>
					<li class="wo-cat">マシン</li>
					<ul>
						<li><a class="wo-list" href="#">ケーブルクランチ</a></li>
						<li><a class="wo-list" href="#">ロープクランチ</a></li>
					</ul>
					<li class="wo-cat">自重(器具なし)</li>
					<ul>
						<li><a class="wo-list" href="#">ストレートレッグクランチ</a></li>
						<li><a class="wo-list" href="#">シットアップ</a></li>
						<li><a class="wo-list" href="#">クランチ</a></li>
						<li><a class="wo-list" href="#">ヒップレイズ</a></li>
						<li><a class="wo-list" href="#">レッグレイズ</a></li>
						<li><a class="wo-list" href="#">ハンギングレッグレイズ</a></li>
						<li><a class="wo-list" href="#">ボディアーチ</a></li>
					</ul>
				</ul>
				<li><a href="#">足</a></li>
				<ul>
					<li class="wo-cat">バーベル</li>
					<ul>
						<li><a class="wo-list" href="#">フルスクワット</a></li>
						<li><a class="wo-list" href="#">ランジ</a></li>
						<li><a class="wo-list" href="#">フロントスクワット</a></li>
						<li><a class="wo-list" href="#">ハックリフト</a></li>
					</ul>
					<li class="wo-cat">マシン</li>
					<ul>
						<li><a class="wo-list" href="#">レッグプレス</a></li>
						<li><a class="wo-list" href="#">レッグエクステンション</a></li>
						<li><a class="wo-list" href="#">レッグカール</a></li>
					</ul>
					<li class="wo-cat">自重(器具なし)</li>
					<ul>
						<li><a class="wo-list" href="#">ワンレッグスクワット</a></li>
						<li><a class="wo-list" href="#">シッシースクワット</a></li>
					</ul>
				</ul>
				<li><a href="#">ふくらはぎ</a></li>
				<ul>
					<li class="wo-cat">マシン</li>
					<ul>
						<li><a class="wo-list" href="#">カーフレイズオンレッグプレスマシン</a></li>
						<li><a class="wo-list" href="#">ケーブルカール</a></li>
					</ul>
				</ul>
				<li><a href="#">前腕部</a></li>
				<ul>
					<li class="wo-cat">バーベル</li>
					<ul>
						<li><a class="wo-list" href="#">リストカール</a></li>
						<li><a class="wo-list" href="#">リストカールオンベンチ</a></li>
					</ul>
				</ul>
				<li><a href="#">全身パワー系</a></li>
				<ul>
					<li class="wo-cat">バーベル</li>
					<ul>
						<li><a class="wo-list" href="#">ハイクリーン</a></li>
					</ul>
				</ul>
			</ul>
		</div>

    </main>
</div>

<script src="index.js"></script>
<script src="data.js"></script>
<script>
var nav = document.querySelector('#myNavigator');
var app = {
  goToPage    : function(pageId) { nav.pushPage(pageId + '.html'); },
  showDialog  : function(id) { document.getElementById(id).show(); },
  hideDialog  : function(id) { document.getElementById(id).hide(); },
  fromTemplate : function() {
    var dialog = document.getElementById('dialog-3');
    if (dialog) {
      dialog.show();
    } else {
      ons.createDialog('dialog.html').then(function(dialog) {
        dialog.show();
      });
    }
  },
  createPartButton: function (){
  	var p = {}, img = '', h = '<div class="part-button" onclick="app.showFavoriteList();">'
  		+ '<i class="material-icons">favorite</i> Favorite</div>';
  	for(var i=0, l=parts.length; i<l; i++) {
  		p = parts[i];
  		img = p.img_path.split('/')[2];
  		h += '<div class="part-button" onclick="app.showEventsList('+ i +');">'
		  + '<img class="body" src="../assets/img/body/' + img + '" alt="back"> ' + p.en + '</div>';
	}
	var el = document.getElementById('part-buttons');
	el.innerHTML = h;
  },
  showFavoriteList: function() {
	var h = '';
		var cat = parts[9].categories;
  	for(var j=0, cl=cat.length; j<cl; j++) {
  		var c = cat[j];
  		h += '<li class="list-header">' + c.en + ' - ' + c.ja + '</li>'
	  	for(var k=0, el=c.events.length; k<el; k++) {
	  		var e = c.events[k];
	  		h += '<li class="list-item list-item--tappable"><label for="s1" class="list-item__center">' + e.ja + '<br/>' + e.en + '</label></li>'
	  	}
  	}
	var ul = document.getElementById('event-list');
	ul.innerHTML = h;
  },
  showEventsList: function(index) {
	var h = '';
		var cat = parts[index].categories;
  	for(var j=0, cl=cat.length; j<cl; j++) {
  		var c = cat[j];
  		h += '<li class="list-header">' + c.en + ' - ' + c.ja + '</li>'
	  	for(var k=0, el=c.events.length; k<el; k++) {
	  		var e = c.events[k];
	  		h += '<li class="list-item list-item--tappable"><label for="s1" class="list-item__center">' + e.ja + '<br/>' + e.en + '</label></li>'
	  	}
  	}
	var ul = document.getElementById('event-list');
	ul.innerHTML = h;
  }
};



const DAYS_IN_MONTH  = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];
const MONTH_EN_SHORT = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];

class Calendar {
	constructor(target) {
		this.selectedDate = Date.now();
		this.targetDate = (target ? target : new Date());
		this.y = this.targetDate.getFullYear();
		this.m = this.targetDate.getMonth();

		let cal = document.getElementById('cal');
		let body = document.createElement('tbody');
		for(let r=0; r<6; r++){
			let tr = document.createElement('tr');
			for(let c=0; c<7; c++){
				let td = document.createElement('td');
				td.addEventListener('click', this.selectDate, false);
				tr.append(td);
			}
			body.append(tr);
		}
		cal.append(body);
	}
	isLeapYear() {
		return ((this.y % 4 == 0) && (this.y % 100 != 0)) || (this.y % 400 == 0)
	}
	changeMonth(n) {
		if(n<-1 || n>1)				{ alert('argument should be -1 or 0 or 1') }
		else if(n==0)				{ this.targetDate = new Date() }
		else if(n==-1 && this.m==0) { this.targetDate = new Date(this.y-1, 11) }
		else if(n==1 && this.m==11) { this.targetDate = new Date(this.y+1,  0) }
		else						{ this.targetDate = new Date(this.y, this.m+n) }

		this.y = this.targetDate.getFullYear();
		this.m = this.targetDate.getMonth();
		document.getElementById('cal-lbl-ym').innerHTML = MONTH_EN_SHORT[this.m] + ' ' + this.y;

		console.log('change month', this.y, this.m);
		// console.log(this.targetDate);
		// console.log(this.targetDate.toLocaleString());
		// console.log(this.targetDate.toLocaleDateString());
		// console.log(this.targetDate.toJSON());

		// this.render();
		let day1st = new Date(this.y, this.m, 1).getDay();
		let days = DAYS_IN_MONTH[this.m] + (this.m==2 ? this.isLeapYear() : 0);


		let rows = Math.ceil((day1st+days)/7);
		console.log('rows', (day1st+days)/7, rows, 'day1st', day1st, (day1st+days));
		let cells = document.querySelectorAll('#cal td');
		// console.log(day1st, cells);
		for(let c = 0; c<42; c++) {
			if(c>=day1st && c<day1st+days) {
				cells[c].innerText = c - day1st + 1;
				// cells[c].addEventListener('click', calendar.selectDate, false);
			} else {
				cells[c].innerText = '';
			}
		}
	}
	selectDate(el) {
		if(el) {
			this.selectedDate = new Date(this.y, this.m, el.innerText);
		}
		console.log(el, el.innerText, this.selectedDate);
	}
	showRecord() {

	}
	render() {
	}
};

	var calendar = null;

document.addEventListener('init', function(event) {
  var page = event.target;

  if (page.id === 'page1') {
    page.querySelector('#push-button').onclick = function() {
      document.querySelector('#myNavigator').pushPage('page2.html', {data: {title: 'Page 2'}});
    };
  } else if (page.id === 'page2') {
    page.querySelector('ons-toolbar .center').innerHTML = page.data.title;
  } else if (page.id === 'home') {
  	calendar = new Calendar();
	calendar.changeMonth(0);
  } else if (page.id === 'events') {
    app.createPartButton();
  }
});
window.onload = function() {
	// app.createPartButton();
};
</script>
</body>
</html>